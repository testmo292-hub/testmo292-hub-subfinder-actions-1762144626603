name: Subfinder Reconnaissance

on:
  workflow_dispatch:
    inputs:
      target_domain:
        description: 'Target domain for subdomain enumeration'
        required: true
        default: 'example.com'
      output_format:
        description: 'Output format (json, csv, txt)'
        required: false
        default: 'txt'

jobs:
  subfinder-scan:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Install Go
      uses: actions/setup-go@v4
      with:
        go-version: '1.21'

    - name: Install Subfinder
      run: |
        go install -v github.com/projectdiscovery/subfinder/v2/cmd/subfinder@latest

    - name: Run Subfinder
      run: |
        mkdir -p results
        subfinder -d ${{ github.event.inputs.target_domain }} -o results/subdomains.${{ github.event.inputs.output_format }}

    - name: Upload results
      uses: actions/upload-artifact@v4
      with:
        name: subfinder-results
        path: results/
        retention-days: 7